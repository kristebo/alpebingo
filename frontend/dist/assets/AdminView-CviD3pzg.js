import{q as L,s as c,A as r,d as D,x as E,c as i,a as e,F as f,r as w,b as u,j as T,B as K,C as V,D as A,E as F,o as s,n as I,t as v,_ as M}from"./index-GyEXzpE3.js";const R=L("admin",()=>{const H=c([]),l=c([]),m=c([]),y=c([]),k=c(!1);async function g(){k.value=!0;try{H.value=await r.get("/admin/brukere")}finally{k.value=!1}}async function _(a,p){await r.put(`/admin/brukere/${a}/team`,{teamId:p}),await g()}async function b(a,p){await r.put(`/admin/brukere/${a}/rolle`,{rolle:p}),await g()}async function h(){l.value=await r.get("/admin/teams")}async function B(a){await r.post("/admin/teams",{navn:a}),await h()}async function $(a,p){await r.put(`/admin/teams/${a}`,{navn:p}),await h()}async function N(a){await r.delete(`/admin/teams/${a}`),await h()}async function d(){m.value=await r.get("/admin/kategorier")}async function n(a){await r.post("/admin/kategorier",{navn:a}),await d()}async function t(a,p){await r.put(`/admin/kategorier/${a}`,{navn:p}),await d()}async function o(a){await r.delete(`/admin/kategorier/${a}`),await d()}async function C(){y.value=await r.get("/admin/hendelser")}async function S(a,p){await r.post("/admin/hendelser",{tekst:a,kategoriId:p,aktiv:!0}),await C()}async function x(a,p){await r.put(`/admin/hendelser/${a}`,p),await C()}async function U(a){await r.delete(`/admin/hendelser/${a}`),await C()}return{brukere:H,teams:l,kategorier:m,hendelser:y,laster:k,hentBrukere:g,oppdaterBrukerTeam:_,oppdaterBrukerRolle:b,hentTeams:h,opprettTeam:B,oppdaterTeam:$,slettTeam:N,hentKategorier:d,opprettKategori:n,oppdaterKategori:t,slettKategori:o,hentHendelser:C,opprettHendelse:S,oppdaterHendelse:x,slettHendelse:U}}),j={class:"admin-side"},q={class:"faner"},z=["onClick"],P={key:0,class:"panel"},G={class:"tabell"},J=["value","onChange"],O=["value","onChange"],Q=["value"],W={key:1,class:"panel"},X={class:"legg-til-rad"},Y={class:"tabell"},Z=["onClick"],ee={key:2,class:"panel"},te={class:"legg-til-rad"},ne={class:"tabell"},le=["onClick"],ae={key:3,class:"panel"},ie={class:"legg-til-rad"},se=["value"],oe={class:"tabell"},re=["checked","onChange"],ue=["onClick"],de=D({__name:"AdminView",setup(H){const l=R(),m=c("brukere"),y=c(""),k=c(""),g=c(""),_=c("");E(async()=>{await Promise.all([l.hentBrukere(),l.hentTeams(),l.hentKategorier(),l.hentHendelser()])});async function b(){y.value.trim()&&(await l.opprettTeam(y.value),y.value="")}async function h(){k.value.trim()&&(await l.opprettKategori(k.value),k.value="")}async function B(){!g.value.trim()||!_.value||(await l.opprettHendelse(g.value,_.value),g.value="")}function $(d){if(!d)return"-";const n=l.teams.find(t=>t.id===d);return(n==null?void 0:n.navn)||"-"}function N(d){const n=l.kategorier.find(t=>t.id===d);return(n==null?void 0:n.navn)||d}return(d,n)=>(s(),i("div",j,[n[15]||(n[15]=e("h1",null,"Administrasjon",-1)),e("div",q,[(s(),i(f,null,w(["brukere","teams","kategorier","hendelser"],t=>e("button",{key:t,class:I(["fane-knapp",{aktiv:m.value===t}]),onClick:o=>m.value=t},v(t.charAt(0).toUpperCase()+t.slice(1)),11,z)),64))]),m.value==="brukere"?(s(),i("div",P,[n[7]||(n[7]=e("h2",null,"Brukere",-1)),e("table",G,[n[6]||(n[6]=e("thead",null,[e("tr",null,[e("th",null,"Brukernavn"),e("th",null,"E-post"),e("th",null,"Rolle"),e("th",null,"Team"),e("th",null,"Handlinger")])],-1)),e("tbody",null,[(s(!0),i(f,null,w(u(l).brukere,t=>(s(),i("tr",{key:t.id},[e("td",null,v(t.brukernavn),1),e("td",null,v(t.epost),1),e("td",null,[e("select",{value:t.rolle,onChange:o=>u(l).oppdaterBrukerRolle(t.id,o.target.value)},[...n[4]||(n[4]=[e("option",{value:"bruker"},"Bruker",-1),e("option",{value:"admin"},"Admin",-1)])],40,J)]),e("td",null,[e("select",{value:t.teamId||"",onChange:o=>u(l).oppdaterBrukerTeam(t.id,o.target.value||null)},[n[5]||(n[5]=e("option",{value:""},"Ingen team",-1)),(s(!0),i(f,null,w(u(l).teams,o=>(s(),i("option",{key:o.id,value:o.id},v(o.navn),9,Q))),128))],40,O)]),e("td",null,v($(t.teamId)),1)]))),128))])])])):T("",!0),m.value==="teams"?(s(),i("div",W,[n[9]||(n[9]=e("h2",null,"Teams",-1)),e("div",X,[K(e("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>y.value=t),placeholder:"Nytt team-navn",onKeyup:A(b,["enter"])},null,544),[[V,y.value]]),e("button",{class:"knapp knapp-primær",onClick:b},"Legg til")]),e("table",Y,[n[8]||(n[8]=e("thead",null,[e("tr",null,[e("th",null,"Navn"),e("th",null,"Handlinger")])],-1)),e("tbody",null,[(s(!0),i(f,null,w(u(l).teams,t=>(s(),i("tr",{key:t.id},[e("td",null,v(t.navn),1),e("td",null,[e("button",{class:"knapp-liten slett",onClick:o=>u(l).slettTeam(t.id)},"Slett",8,Z)])]))),128))])])])):T("",!0),m.value==="kategorier"?(s(),i("div",ee,[n[11]||(n[11]=e("h2",null,"Kategorier",-1)),e("div",te,[K(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>k.value=t),placeholder:"Ny kategori-navn",onKeyup:A(h,["enter"])},null,544),[[V,k.value]]),e("button",{class:"knapp knapp-primær",onClick:h},"Legg til")]),e("table",ne,[n[10]||(n[10]=e("thead",null,[e("tr",null,[e("th",null,"Navn"),e("th",null,"Handlinger")])],-1)),e("tbody",null,[(s(!0),i(f,null,w(u(l).kategorier,t=>(s(),i("tr",{key:t.id},[e("td",null,v(t.navn),1),e("td",null,[e("button",{class:"knapp-liten slett",onClick:o=>u(l).slettKategori(t.id)},"Slett",8,le)])]))),128))])])])):T("",!0),m.value==="hendelser"?(s(),i("div",ae,[n[14]||(n[14]=e("h2",null,"Bingofelt-hendelser",-1)),e("div",ie,[K(e("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>g.value=t),placeholder:"Ny hendelse-tekst"},null,512),[[V,g.value]]),K(e("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>_.value=t)},[n[12]||(n[12]=e("option",{value:""},"Velg kategori",-1)),(s(!0),i(f,null,w(u(l).kategorier,t=>(s(),i("option",{key:t.id,value:t.id},v(t.navn),9,se))),128))],512),[[F,_.value]]),e("button",{class:"knapp knapp-primær",onClick:B},"Legg til")]),e("table",oe,[n[13]||(n[13]=e("thead",null,[e("tr",null,[e("th",null,"Tekst"),e("th",null,"Kategori"),e("th",null,"Aktiv"),e("th",null,"Handlinger")])],-1)),e("tbody",null,[(s(!0),i(f,null,w(u(l).hendelser,t=>(s(),i("tr",{key:t.id},[e("td",null,v(t.tekst),1),e("td",null,v(N(t.kategoriId)),1),e("td",null,[e("input",{type:"checkbox",checked:t.aktiv,onChange:o=>u(l).oppdaterHendelse(t.id,{aktiv:o.target.checked})},null,40,re)]),e("td",null,[e("button",{class:"knapp-liten slett",onClick:o=>u(l).slettHendelse(t.id)},"Slett",8,ue)])]))),128))])])])):T("",!0)]))}}),ve=M(de,[["__scopeId","data-v-75c383ed"]]);export{ve as default};
